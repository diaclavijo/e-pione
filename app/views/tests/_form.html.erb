<% disabled = false unless defined? disabled %>


<%= form_for([@consultation,get_resource_ivar],
             builder: ApplicationHelper::MyFormBuilder,
             disabled: disabled,
             html: {class: 'form-horizontal'} ) do |f| %>
    <!--This error message only appears if the modal error message (while introducing the score directly) doesn't -->
    <% if get_resource_ivar.errors.any? && !get_resource_ivar.errors[:score].any? %>

        <div id="error_explanation">
          <div class="<%= flash_class(:error) %>">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h3>Por favor, seleccione algún valor en los campos marcados en rojo para continuar </h3>
          </div>
        </div>
    <% end %>

  <%= render partial: 'form_fields', locals: {f: f} %>

  <% if disabled %>
        <div class="form-group">
            <div class="col-md-4 col-md-offset-4">
                <%=  link_to 'Eliminar Test', [@consultation, get_resource_ivar], method: :delete,
                            data: { confirm: '¿Está seguro de que quiere eliminar este test?' },
                            class: 'btn btn-danger'
                            %>
            </div>
         </div>

  <% else %>
        <div class="form-group">
            <div class="actions">
              <%= f.submit %>
            </div>
        </div>

  <% end %>

<% end %>
