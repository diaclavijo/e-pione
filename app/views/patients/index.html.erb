

<% breadcrumb :patients %>

<% content_for :title do %>
    Búsqueda de pacientes
<% end %>

<% content_for :top_right do %>
    <h2 class="text-muted"> <%= fecha_actual %></h2>
<% end %>

<% content_for :top_title do %>
    Búsqueda de Pacientes
<% end %>

<div class="container"> <!--Container to keep everything inside the page centered-->



  <!--Jumbotron containing two rows, one with one row (a table) and one with three columns (pagination, two buttons and an input field)-->
  <div class="jumbotron" id="jumbotron-patients">
    <div class="row">

      <h4>Últimos pacientes atendidos</h4>

      <div class="table-responsive">
        <table class="table table-striped table-hover" id="table-patients"> <!--Added id for testing purposes-->
          <tr>
            <th>Apellidos</th>
            <th>Nombre</th>
            <th>NHC</th>
            <th>F.NAC</th>
            <th>Exitus</th>
            <th></th>
            <th></th>
          </tr>
          <% @patients.each do |patient| %>
              <tr>
                <td><%= patient.surname %> </td> <!-- Apellidos-->
                <td><%= patient.name %> </td> <!-- Nombre-->
                <td><%= patient.id2 %> </td> <!-- NHC-->
                <td><%= patient.birth %> </td> <!-- Fecha Nacimiento-->
                <td><%= patient.exitus ? 'Si' : 'No' %> </td> <!-- Exitus-->
                <td> <%= link_to 'Más datos', edit_patient_path(patient) %> </td>
                <td><%= link_to 'Historia clínica', patient_consultations_path(patient.id)  %></td> <!-- Historia-->
              </tr>
          <% end %>

        </table>
      </div>
      <!--/.responsive-table-->
    </div>
    <!--/row-->
    <div class="row"><!--Row with three columns of size 4 (pagination), 4 (button and input field) and 2 (button)-->
      <div class="col-md-4">

        <%= paginate @patients, :window=> 4 %>
      </div>
      <%= form_tag("", method: "get") do %>
      <div class="col-md-2">
        <div id="dropdown-search-patient">
            <%= select_tag(:search_type, options_for_select([['Buscar por', 0],['Nombre', 1], ['Apellido', 2]], params[:search_type]) ) %>    <!-- TODO it has to be changed the style according to what was designed, It was made using a <ul> style see the sources  -->
        </div>
        </div>
      <div class="col-md-4">

        <div class="input-group">
         <div id="text-search-patient"> <%= text_field_tag(:search, params[:search]) %></div>

          <div class="input-group-btn">
            <%= submit_tag("Buscar") %>
          </div>
      <% end %>

          <!-- /btn-group -->
        </div>
        <!-- /input-group -->
      </div>
      <!--/col-md-4-->

      <div class="col-md-2">
        <%= link_to 'Nuevo paciente', new_patient_path, class: 'btn btn-primary' %>
      </div>
    </div>
    <!--/row-->


  </div> <!--/jumbotron -->


  <%= link_to '<<Volver', :back %>   <!-- TODO This is javascript, make this link to be html -->

</div> <!-- /container -->



