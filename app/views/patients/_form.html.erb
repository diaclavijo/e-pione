

<%= form_for @patient,  :validate => true , builder: ApplicationHelper::MyFormBuilder,
             :html => { :class => 'form-horizontal' }   do |f| %>

  <% if @patient.errors.any? %>
    <div id="error_explanation">
        <div class="<%= flash_class(:error) %>">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h3>Por favor, rellene los campos marcados en rojo para continuar</h3>
            <ul>
            </ul>
        </div>
    </div>
  <% end %>
   <!--TODO: Validación de campos hecha, pero sólo se comprueba la presencia o no del campo.
    TODO: Checkbox está hecho de forma "manual" -->
    <div class="form-group">
        <%= f.label :name, 'Nombre (*)' %>
        <%= f.text_field :name %>
    </div>

    <div class="form-group">
        <%= f.label :surname, 'Apellido (*)' %>
        <%= f.text_field :surname, class: 'form-control' %>
    </div>

    <div class="form-group">
        <%= f.label :birth, 'Fecha de nacimiento (*)' %>
        <%= f.date_select :birth, start_year: 1900 %>
    </div>

		<div class="form-group">
			<%= f.label :gender, 'Sexo' %>
			<%= f.select :gender, Patient::GENDERS,  { include_blank: 'Seleccionar...' } %>
		</div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>

    <div class="form-group">
      <%= f.label :id2, 'NHC ' %>
      <%= f.number_field :id2 %>
      <div class="col-md-3 text-muted">Será el identificador del paciente</div>

    </div>

    <div class="form-group">
      <%= f.label :exitus, 'Exitus' %>
      <div class="col-md-4">
        <div class="checkbox">
          <%= f.check_box :exitus, type:'checkbox' %> Sí
        </div>
      </div>
    </div>


    <div class="col-md-4 col-md-offset-6">
      <hr class="hr_consult"></hr>  <!--Separator -->
    </div>

    <div class="form-group"> <!--TODO: Adaptar escolaridad  sobre números 4-20 o poner que el fac. pueda introducir-->
        <%= f.label :education, 'Escolaridad' %>
        <%= f.select :education, Patient::EDUCATIONS , { include_blank: 'Seleccionar...' }%>
    </div>
    <!--TODO: Sólo visible cuando el facultativo pulsa "Otro" en el select anterior-->
    <div class="form-group text-right text-muted">
      <%= f.label :education, 'Otro (introducir número de años)' %>
      <%= f.number_field :id2 %>
    </div>

    <% if request.path == new_patient_path %>
        <div class="form-group">
          <div class="actions">
            <%= f.submit %>
          </div>
        </div>
    <% else %>

        <div class="form-group">
          <div class="actions">
            <%= f.submit %>

           <div class="col-md-2">
              <%=  link_to 'Eliminar paciente', @patient, method: :delete,
                           data: { confirm:
                                           '¿Está seguro de que quiere eliminar este paciente? Esta operación es irreversible.'
                           },
                           class: 'btn btn-danger'
              %>
            </div>
         </div>
        </div>
    <% end %>
<% end %>
