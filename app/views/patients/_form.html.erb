<%= form_for @patient , builder: ApplicationHelper::MyFormBuilder,  :html => { :class => 'form-horizontal' }   do |f| %>

  <% if @patient.errors.any? %>
    <div id="error_explanation">
        <div class="<%= flash_class(:error) %>">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <h3><%= pluralize(@patient.errors.count, "errore") %> impiden que este paciente sea creado</h3>
            <ul>
            <% @patient.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
            </ul>
        </div>
    </div>
  <% end %>
   <!--TODO: Validación de campos hecha, pero sólo se comprueba la presencia o no del campo.
   TODO: Checkbox está hecho de forma "manual" y embellecer fecha en application helper
   -->
    <div class="form-group">
        <%= f.label :name, 'Nombre (*)' %>
        <%= f.text_field :name %>
    </div>

    <div class="form-group">
        <%= f.label :surname, 'Apellido (*)' %>
        <%= f.text_field :surname, class: 'form-control' %>
    </div>

    <div class="form-group">
        <%= f.label :birth, 'Fecha de nacimiento (*)' %>
        <%= f.date_select :birth, start_year: 1900, end_year:2014 %>     <!--TODO: Darle estilo a estos dropdowns -->
    </div>

    <div class="form-group">
        <%= f.label :gender, 'Sexo (*)' %>
        <%= f.select :gender, Patient::GENDERS,  { include_blank: 'Seleccionar...' }, class: 'form-control' %>
    </div>

    <div class="form-group">
        <%= f.label :civil_status, 'Estado civil (*)' %>
        <%= f.select :civil_status, Patient::CIVIL_STATUSES , { include_blank: 'Seleccionar...' }, class:'form-control'%>
    </div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>

    <div class="form-group">
        <%= f.label :NIF, 'NIF (*)' %>
        <%= f.text_field :NIF %>
    </div>

    <div class="form-group">
        <%= f.label :passport, 'Pasaporte (Si es extranjero)' %>
        <%= f.text_field :passport %>
    </div>

    <div class="form-group">
        <%= f.label :public_insurance_number, 'Núm. Seg. Social'%>
        <%= f.text_field :public_insurance_number%>
    </div>

    <div class="form-group">
        <%= f.label :private_insurance_number, 'Tarjeta sanitaria' %>
        <%= f.text_field :private_insurance_number %>
    </div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>
    <!--TODO: NHC y Fecha de creación..NHC can be interested to fill here if the real clinic_story_number is different from the id of the table-->

    <div class="form-group">
        <%= f.label :exitus, 'Exitus' %>
        <div class="col-md-4">
            <div class="checkbox">
                <%= f.check_box :exitus, type:'checkbox' %> Sí
            </div>
        </div>
    </div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>
    <div class="form-group">
       <%= f.label :phone_house, 'Teléfono fijo' %>
       <%= f.number_field :phone_house, class: 'form-control' %>
    </div>
    <div class="form-group">
        <%= f.label :mobile_phone, 'Teléfono móvil' %>
        <%= f.number_field :mobile_phone, class: 'form-control', max: 999 %>
    </div>

    <div class="form-group">
        <%= f.label :other_phone, 'Otro teléfono' %>
        <%= f.number_field :other_phone, class:'form-control' %>
    </div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>

    <div class="form-group">
        <%= f.label :address, 'Dirección' %>
        <%= f.text_field :address %>
    </div>
    <div class="form-group">
        <%= f.label :city,'Ciudad (*)' %>
        <%= f.text_field :city %>
    </div>

    <div class="form-group">
        <%= f.label :state, 'Provincia (*)' %>
        <%= f.text_field :state, class:'form-control' %>
    </div>

    <div class="form-group">
        <%= f.label :country, 'Pais (*)' %>
        <%= f.text_field :country, class:'form-control' %>
    </div>

    <div class="col-md-4 col-md-offset-6">
        <hr class="hr_consult"></hr>  <!--Separator -->
    </div>

    <div class="form-group">
        <%= f.label :education, 'Escolaridad' %>
        <%= f.select :education, Patient::EDUCATIONS , { include_blank: 'Seleccionar...' }, class:'form-control'%>
    </div>
    <div class="form-group">
        <%= f.label :occupation, 'Profesión' %>
        <%= f.select :occupation, Patient::OCCUPATIONS , { include_blank: 'Seleccionar...' }, class:'form-control'%>
    </div>
    <div class="form-group">
      <%= f.label :employment, 'Situación laboral' %>
      <%= f.select :employment, Patient::EMPLOYMENTS , { include_blank: 'Seleccionar...' }%>
    </div>
    <div class="form-group">
      <%= f.label :economic_situation, 'Situación económica' %>
      <%= f.select :economic_situation, Patient::ECONOMIC_SITUATIONS , { include_blank: 'Seleccionar...' }%>
    </div>
    <div class="form-group">
      <%= f.label :institutionalized,'¿Institucionalizado?' %>
      <%= f.select :institutionalized, Patient::INSTITUTIONALIZEDS , { include_blank: 'Seleccionar...' }%>
    </div>
    <div class="form-group">
        <div class="actions">
          <%= f.submit %>
        </div>
    </div>
<% end %>
